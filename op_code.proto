syntax = "proto3";

package game;

option go_package = "github.com/lk2023060901/xiaojia-proto-game;game";

// OpCode 操作码 definition
//
// 号段分配规则：
//   - 每个玩法保留 1000 个号段
//   - 0-999: 系统保留
//   - 1000-1999: 槽位/床位系统
//   - 2000-2999: 种田系统
//   - 3000-3999: 商店系统
//   - 4000-4999: 竞赛系统
//   - 5000-5999: 排行榜系统
//   - 6000-6999: 主播系统
//   - 7000-7999: 关系牌系统
//   - 8000-8999: 播报系统
//
enum OpCode {
  // ============================================================
  // 系统保留 (0-999)
  // ============================================================
  OP_NONE = 0;

  // 客户端认证（Client -> Gateway）
  OP_AUTH_REQ = 1;          // anchor.proto, AuthReq
  OP_AUTH_RSP = 2;          // anchor.proto, AuthRsp

  // 主播资源加载完成（Client -> Gateway）
  OP_ANCHOR_LOAD_COMPLETED_REQ = 3; // client.proto, AnchorLoadCompletedReq
  OP_ANCHOR_LOAD_COMPLETED_RSP = 4; // client.proto, AnchorLoadCompletedRsp

  // 心跳（Client <-> Gateway）
  OP_HEARTBEAT_REQ = 5;     // client.proto, HeartbeatReq
  OP_HEARTBEAT_RSP = 6;     // client.proto, HeartbeatRsp

  // 断线重连（Client -> Gateway）
  OP_RECONNECT_REQ = 7;     // client.proto, ReconnectReq
  OP_RECONNECT_RSP = 8;     // client.proto, ReconnectRsp

  // 同步玩家模型变化 - 主播 [S2C]
  OP_SYNC_PLAYER_CHANGE_MODEL = 9;   // player.proto, SyncPlayerChangeModel

  // 玩家资源加载完成（Client -> Gateway）
  OP_PLAYER_LOAD_COMPLETED_REQ = 10; // client.proto, PlayerLoadCompletedReq
  OP_PLAYER_LOAD_COMPLETED_RSP = 11; // client.proto, PlayerLoadCompletedRsp

  // 同步玩家能量增加 - 主播 [S2C]
  OP_SYNC_PLAYER_ADD_ENERGY = 12;    // player.proto, SyncPlayerAddEnergy
  // 玩家能量增加通知 - 玩家 [S2C]
  OP_PLAYER_ADD_ENERGY_NOTIFY = 13;  // player.proto, PlayerAddEnergyNotify

  // 玩家模型变化通知 - 玩家 [S2C]
  OP_PLAYER_CHANGE_MODEL_NOTIFY = 14; // player.proto, PlayerChangeModelNotify

  // ============================================================
  // 槽位/床位系统 (1000-1999)
  // ============================================================

  // 同步所有槽位信息 [S2C]
  OP_SYNC_ANCHOR_SLOTS = 1000; // slot.proto, SyncAnchorSlots
  // 同步单个槽位信息 [S2C]
  OP_SYNC_ANCHOR_SLOT = 1001;  // slot.proto, SyncAnchorSlot
  // 同步床位数值变动 [S2C]
  OP_SYNC_BED_VALUE = 1002;    // bed.proto, SyncBedValue
  // 同步槽位玩家模型 [S2C]
  OP_SYNC_SLOT_MODEL = 1003;   // slot.proto, SyncSlotModel
  // 同步槽位新增人员 [S2C]
  OP_SYNC_SLOT_ADD_PLAYER = 1004;    // slot.proto, SyncSlotAddPlayer
  // 同步槽位人员移除 [S2C]
  OP_SYNC_SLOT_REMOVE_PLAYER = 1005; // slot.proto, SyncSlotRemovePlayer
  // 同步 PK 增加的积分 [S2C]
  OP_SYNC_PK_SCORE = 1006;           // slot.proto, SyncPkScore
  // 同步 PK 送礼倒计时 [S2C]
  OP_SYNC_PK_GIFT_COOLDOWN = 1007;   // slot.proto, SyncPkGiftCooldown
  // 同步 PK 开始 [S2C]
  OP_SYNC_PK_START = 1008;           // slot.proto, SyncPkStart
  // 同步 PK 结算 [S2C]
  OP_SYNC_PK_SETTLEMENT = 1009;      // slot.proto, SyncPkSettlement
  // 同步送礼 [S2C]
  OP_SYNC_GIFT = 1010;               // slot.proto, SyncGift

  // ============================================================
  // 种田系统 (2000-2999)
  // ============================================================

  // 同步种田轮次信息 [S2C]
  OP_SYNC_FARMING_ROUND = 2000; // farming.proto, SyncFarmingRound
  // 同步单个田块变更 [S2C]
  OP_SYNC_FARMING_FIELD = 2001; // farming.proto, SyncFarmingField
  // 种植请求 [C2S]
  OP_PLANTING_REQ = 2002;       // farming.proto, PlantingReq
  // 种植响应 [S2C]
  OP_PLANTING_RES = 2003;       // farming.proto, PlantingRes
  // 种田开奖结算 - 主播 [S2C]
  OP_SYNC_PLANTING_SETTLEMENT = 2004;      // farming.proto, SyncPlantingSettlement
  // 种田开奖结算 - 玩家 [S2C]
  OP_PLANTING_SETTLEMENT_NOTIFY = 2005;    // farming.proto, PlantingSettlementNotify

  // ============================================================
  // 商店系统 (3000-3999)
  // ============================================================

  // 同步商店完整列表 [S2C]
  OP_SYNC_STORE_GOODS = 3000;      // store.proto, SyncStoreGoods
  // 同步单个商品状态 [S2C]
  OP_SYNC_STORE_GOODS_ITEM = 3001; // store.proto, SyncStoreGoodsItem
  // 购买商品请求 [C2S]
  OP_BUY_STORE_GOODS_REQ = 3002;   // store.proto, BuyStoreGoodsReq
  // 购买商品响应 [S2C]
  OP_BUY_STORE_GOODS_RES = 3003;   // store.proto, BuyStoreGoodsRes

  // ============================================================
  // 竞赛系统 (4000-4999)
  // ============================================================

  // 同步投票阶段全量信息 [S2C]
  OP_SYNC_COMP_VOTING = 4000;      // competition.proto, SyncCompVoting
  // 同步单项票数变动 [S2C]
  OP_SYNC_COMP_VOTE_UPDATE = 4001; // competition.proto, SyncCompVoteUpdate
  // 阶段切换同步 [S2C]
  OP_SYNC_COMP_STAGE = 4002;       // competition.proto, SyncCompStage
  // 报名助力同步 [S2C]
  OP_SYNC_COMP_SIGNUP = 4003;      // competition.proto, SyncCompSignup
  // PK阶段状态全量同步 [S2C]
  OP_SYNC_COMP_PK = 4004;          // competition.proto, SyncCompPk
  // PK阵营积分增量同步 [S2C]
  OP_SYNC_COMP_PK_SCORE = 4005;    // competition.proto, SyncCompPkScore
  // 结算结果同步 [S2C]
  OP_SYNC_COMP_SETTLEMENT = 4006;  // competition.proto, SyncCompSettlement

  // ============================================================
  // 排行榜系统 (5000-5999)
  // ============================================================

  // 获取排行榜请求 [C2S]
  OP_GET_RANK_REQ = 5000;          // rank.proto, GetRankReq
  // 同步排行榜数据 [S2C]
  OP_SYNC_RANK = 5001;             // rank.proto, SyncRank

  // ============================================================
  // 主播系统 (6000-6999)
  // ============================================================

  // 同步主播基础信息 [S2C]
  OP_SYNC_ANCHOR_INFO = 6000;      // anchor.proto, SyncAnchorInfo
  // 主播切换场景请求 [C2S]
  OP_SWITCH_ANCHOR_SCENE_REQ = 6001; // anchor.proto, SwitchAnchorSceneReq
  // 主播切换场景响应 [S2C]
  OP_SWITCH_ANCHOR_SCENE_RES = 6002; // anchor.proto, SwitchAnchorSceneRes

  // ============================================================
  // 关系牌系统 (7000-7999)
  // ============================================================

  // 同步玩家全量关系列表 [S2C]
  OP_SYNC_PLAYER_RELATIONSHIPS = 7000; // relationship.proto, SyncPlayerRelationships
  // 同步单项关系数值更新 [S2C]
  OP_SYNC_RELATIONSHIP_UPDATE = 7001;  // relationship.proto, SyncRelationshipUpdate
  // 同步槽位玩家关系标志 [S2C]
  OP_SYNC_SLOT_RELATIONSHIP = 7002;    // relationship.proto, SyncSlotRelationship

  // ============================================================
  // 播报系统 (8000-8999)
  // ============================================================

  // 同步播报 [S2C]
  OP_SYNC_BROADCAST = 8000;            // broadcast.proto, SyncBoardcast
}